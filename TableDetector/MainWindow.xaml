<Window x:Class="TableDetectionApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Table Surface Detection" Height="700" Width="1200" 
        Closing="Window_Closing">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#333333" Padding="10">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Kinect Table Surface Detection" Foreground="White" FontSize="18" VerticalAlignment="Center"/>
                <TextBlock Text="{Binding StatusText}" Foreground="White" Margin="20,0,0,0" VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Main Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Color Feed -->
            <Border Grid.Column="0" BorderBrush="Gray" BorderThickness="1" Margin="5">
                <Grid>
                    <Image x:Name="ColorImage" Stretch="Uniform"/>
                    <TextBlock Text="Color Feed" Foreground="White" Background="#80000000" 
                               Padding="5" VerticalAlignment="Top" HorizontalAlignment="Left"/>
                </Grid>
            </Border>

            <!-- Depth Feed -->
            <Border Grid.Column="1" BorderBrush="Gray" BorderThickness="1" Margin="5">
                <Grid>
                    <Image x:Name="DepthImage" Stretch="Uniform"/>
                    <TextBlock Text="Depth Feed" Foreground="White" Background="#80000000" 
                               Padding="5" VerticalAlignment="Top" HorizontalAlignment="Left"/>
                </Grid>
            </Border>
        </Grid>

        <!-- Controls -->
        <Border Grid.Row="2" Background="#333333" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="Table Depth:" Foreground="White" VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding TableDepthText}" Foreground="#AAFFAA" FontWeight="Bold" 
                               Margin="5,0,0,0" Width="120" VerticalAlignment="Center"/>

                    <Button Content="Lock Depth" Click="LockTable_Click" Margin="10,0,0,0" Padding="5,2"/>
                    <Button Content="Unlock (Auto)" Click="UnlockTable_Click" Margin="5,0,0,0" Padding="5,2"/>
                    <Button Content="Toggle Contours" Click="ToggleContours_Click" Margin="5,0,0,0" Padding="5,2"/>
                    <Button Content="Find Largest Surface" Click="FindLargestSurface_Click" Margin="5,0,0,0" Padding="5,2"/>
                    <CheckBox Content="Angled View" IsChecked="True" Foreground="White" Margin="10,0,0,0" 
                              VerticalAlignment="Center" Name="AngledViewCheckBox" Checked="AngledView_Changed" Unchecked="AngledView_Changed"/>
                </StackPanel>

                <Button Grid.Column="1" Content="Diagnose Table Detection" Click="Diagnose_Click" Padding="10,2"/>
            </Grid>
        </Border>
    </Grid>
</Window>